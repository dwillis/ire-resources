WEB SCRAPING

Brad Heath
USA TODAY
(202) 906-8177
bheath@usatoday.com

©2009 - Duplication prohibited without permission from Investigative Reporters and Editors, Inc.

WEB SCRAPING

What is all this?
“Scraping” means extracting data from websites. Think
about any site that lets you search a data set. How much
better would it be if you could get the whole thing?

For example: Say your state has a website where you
can search for sex offenders by ZIP code. That’s super if
you only want to look at one place. But if you want them
all? You scrape.
The result: Records from the web end up on your
computer so you can structure them to suit your needs.

©2009 - Duplication prohibited without permission from Investigative Reporters and Editors, Inc.

WEB SCRAPING

If it’s online already, why bother?
Lots of reasons:
• It might not be online forever.
• It’s hard to analyze something using a search form (ok,
it’s close to impossible). After you scrape, you can put
the data in Excel. Easy!
• You might want to search in different ways.
• Wouldn’t it be better on your website?

©2009 - Duplication prohibited without permission from Investigative Reporters and Editors, Inc.

If it’s online already, why bother?
In other words,
This …

… becomes this.

©2009 - Duplication prohibited without permission from Investigative Reporters and Editors, Inc.

WEB SCRAPING

So what can I scrape?
What can’t you scrape? I’ve used scraped data on:
• Sex offenders
• The stimulus
• Foreclosures
• Prison inmates
• Federal audits
• Airport security lines
• Hurricane Katrina recovery
• Yahoo! message boards
• Unemployment rates
• War casualties
• EPA correspondence
… and lots more …..
©2009 - Duplication prohibited without permission from Investigative Reporters and Editors, Inc.

WEB SCRAPING

How does that actually work?
Think about a sex offender registry. It lets you search by
ZIP code. But you need every sex offender in the state?
To get them, you’d have to enter every ZIP code, then
look at the results.
Scraping lets you use a computer program to do the
same thing, only you don’t actually have to do the typing.
For example, to download Michigan’s sex offender, I
used a program to search 90,000 possible ZIP codes
and capture the results.
What started out as a web page ended up as a simple,
structured database on my computer.
©2009 - Duplication prohibited without permission from Investigative Reporters and Editors, Inc.

WEB SCRAPING

For example …

http://www.nsp.state.ne.us/SOR/find.cfm
(68504)
©2009
- Duplication prohibited without permission from Investigative Reporters and Editors, Inc.

WEB SCRAPING

Which looks like …

©2009 - Duplication prohibited without permission from Investigative Reporters and Editors, Inc.

WEB SCRAPING

That sure doesn’t look easy.
Yes, the learning curve can be steep.
You’ll probably use software you haven’t used before. Or
some programming. But some tools – like DownThemAll
– are much easier. Start with those.
And, umm, necessity brings out the best in us. When
you need to scrape, you really need to scrape.

©2009 - Duplication prohibited without permission from Investigative Reporters and Editors, Inc.

WEB SCRAPING

What do I need?
Lots of tools can help you with web scraping. Many are
free. Among your best options:
• A scripting language. Perl rules, but PHP, Ruby, VB,
C# and others will do the job. Some have code
already written that lets your script pretend to be a
web browser (like WWW::Mechanize).
• DownThemAll http://www.downthemall.net/ lets you
download lots of pages at once in Firefox.
• Open Kapow http://openkapow.com/ lets you build
robots to help scour the web.
• Yahoo Pipes http://pipes.yahoo.com/pipes/
©2009 - Duplication prohibited without permission from Investigative Reporters and Editors, Inc.

WEB SCRAPING

What, no prerequisites?
Some knowledge of the web works.
Like understanding HTML and XML. And being able to
look at the “source code” of a web page (not as scary as
it sounds).
But mostly it’s a problem-solving exercise: Think through
what data the website has, how you search them, how
they’re formatted, and what you plan to do with the
results. Countless websites deal with data in countless
ways; as a result, every scrape is different.
Oh, and one thing you don’t (usually) need: $$$$$.

©2009 - Duplication prohibited without permission from Investigative Reporters and Editors, Inc.

WEB SCRAPING

Wow. Is this even legal?
Probably.
I mean, Google does it.
But do it in a way that’s respectful. Go out of your way to
not cause damage.
Because there are risks. Like being sued, or breaking
someone’s copyright. Or being Lori Drew.

©2009 - Duplication prohibited without permission from Investigative Reporters and Editors, Inc.

WEB SCRAPING

So be polite?
Exactly. Some pointers:
Look at the website’s terms of service. Some will forbid
scraping. You might want to comply (or you might not).
Look at the other terms of service: robots.txt.
Don’t bombard the website. The line between scraping
and a denial of service attack can be pretty thin. (For
example, it’s often a good idea to pause between
requests.)
Identify yourself in case you do cause a problem.
You can ask permission. You might give notice.
©2009 - Duplication prohibited without permission from Investigative Reporters and Editors, Inc.

WEB SCRAPING

Won’t someone try to stop me?
Sometimes.
Some websites hide behind complex Javascript.
Or Flash.
Or, worse, CAPTCHA:

You can get around most of these.

©2009 - Duplication prohibited without permission from Investigative Reporters and Editors, Inc.

WEB SCRAPING

Brad Heath
USA TODAY
(202) 906-8177
bheath@usatoday.com

©2009 - Duplication prohibited without permission from Investigative Reporters and Editors, Inc.

